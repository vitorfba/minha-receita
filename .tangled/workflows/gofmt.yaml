when:
  - event: ["push"]
    branch: ["*"]
  - event: ["pull_request"]
    branch: ["main"]
engine: "nixery"
dependencies:
  nixpkgs:
    - go@1.25.0
environment:
  GOEXPERIMENT: jsonv2
steps:
  - name: "Check Go formatting"
    command: "if [ \"$(gofmt -s -l . | wc -l)\" -gt 0 ]; then exit 1; fi"
