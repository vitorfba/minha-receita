when:
  - event: ["push"]
    branch: ["*"]
  - event: ["pull_request"]
    branch: ["main"]
engine: "nixery"
dependencies:
  nixpkgs:
    - go
environment:
  GOEXPERIMENT: jsonv2
steps:
  - name: "Check Go version"
    command: "go version"
  - name: "Install the linter"
    command: "curl -sSfL https://golangci-lint.run/install.sh | sh -s -- -b $(go env GOPATH)/bin v2.7.2"
  - name: "Check Go CI Lint version"
    command: "golangci-lint version"
  - name: "Linter"
    command: "golangci-lint run ./..."
